<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Scene 1: Age vs. Hours Per Week</title>
    <link rel="stylesheet" type="text/css" href="./css/styles.css"/>
    <script type="text/javascript" src="./lib/d3.js"></script>
</head>

<body>

<div class="control-group">
    <button onclick="window.location.href='1.html'">
        Scene 1 (Current)
    </button> >
    <button onclick="window.location.href='2.html'">
        Scene 2 
    </button> >
    <button onclick="window.location.href='3.html'">
        Scene 3
    </button> >
    <button onclick="window.location.href='4.html'">
        Scene 4
    </button>
</div>

<div class="divTable blueTable">
<div class="divTableBody">
<div class="divTableRow">
<div class="divTableCell">Even though the Married people, in general, have a higher percentage of the >50K than any other Marital Status, but still the majority of married people has income less than 50K, which means that the Marital Status probably not the most effective factor.</div></div>

<div class="divTableRow">
<div class="divTableCell">
<svg id="svg"></svg>
</div></div>


</div>




<script type="text/javascript">

	d3.csv("adult_all.csv", function(error, csv){ // <-D
            render(csv);;
        }); 
		
	function render(data) {
		
		var height = 600, 
			width = 1200, 
			_margins = {top: 60, left: 170, right: 60, bottom: 60}
			XaxisWidth = width - 2 * _margins.left;
			YaxisWidth = height - 2 * _margins.top;
			
		var _data= data;
		
		
			
		
		
			
		var svg = d3.select("#svg")
				.attr("class", "axis")
				.attr("width", width)
				.attr("height", height);
				
		
		 // Chart label 
		svg.append("text")             
		  .attr("x", width/2 )
		  .attr("y",  _margins.top/2 )
		  .style("text-anchor", "middle")
		  .style("font-weight", "bold ")
		  
		  .text("Age vs. Hours Per Week");
		  
			
		//X axis		
		var scaleX = d3.scaleLinear()
				.domain([15, 93]).range([0, XaxisWidth]);
				
		var axisX = d3.axisBottom()
				.scale(scaleX)
				.ticks(10)
				.tickSize(12) // <-A
				.tickPadding(10); // <-C

		svg.append("g")        
			.attr("transform", function(){
				return "translate(" + _margins.left +
						"," +  (height -_margins.bottom ) + ")";
			})
			.call(axisX);
			
		
		 // text label for the x axis
	  svg.append("text")             
		  .attr("x", width/2 )
		  .attr("y",  height - 10 )
		  .style("text-anchor", "middle")
		  .text("Age");
		  
		//Y axis
		var scaleY = d3.scaleLinear()
				.domain([100, 0]).range([0, YaxisWidth]);
		
		var axisY = d3.axisLeft()
				.scale(scaleY); // <-C

		svg.append("g")        
			.attr("transform", function(){
				return "translate(" + _margins.left +
						"," + _margins.top + ")";
			})
			.call(axisY);
			
		//text lable for Y axis

			
			svg.append("text")      
		  .style("text-anchor", "middle")
		  .attr("transform", "translate("+ 100 +","+(height/2)+")rotate(-90)")
		  .text("Hours per Week");
			
		//body and dots
		
		 _bodyG = svg.append("g")
						.attr("class", "body")
						.attr("transform", "translate(" 
								+ _margins.left
								+ "," 
								+ _margins.top + ")")
								
		// append the circles for the scatterplot chart
		//tooltip div
			var tooltip = d3.select("body").append("div").attr("class", "toolTip");
		 // add the dots
		_bodyG.selectAll("dot")
		.data(_data)
		.enter().append("circle")
		.attr("r", 0)
		.attr("cx", XaxisWidth/2)
		.attr("cy", YaxisWidth/2)
		.attr("stroke", function(d) {
					var	color="#D54737"			
					if(d.income == ">50K")
					color="#0B9F00";
					return color
					
					; })
		.attr("stroke-width", 2)
		.attr("fill", function(d) {
					var	color="#D54737"			
					if(d.income == ">50K")
					color="#0B9F00";
					return color
					
					; })
		.attr("fill-opacity", "0")
		.attr("stroke-opacity", "0.5")
		
		.on("mousemove", function(d){
            tooltip.style("opacity", .8)
              .style("left", d3.event.pageX - 50 + "px")
              .style("top", d3.event.pageY - 100 + "px")
              .style("display", "inline-block")
              .html(	 "Age: "+d.age
				+"<br>"+ "Hours per Week: "+ d.hoursperweek 
				+"<br>"+ "Occupation: "+ d.occupation 
				+"<br>"+ "Marital Status: "+ d.maritalstatus
				+"<br>"+ "Education: "+ d.education
				+"<br>"+ "Income: "+ d.income
				);
				})
    		.on("mouseout", function(d){ tooltip.style("display", "none");})
			
			.transition().duration(1500).ease(d3.easeLinear)
			.attr("r", 3)
			.attr("cx", function(d) { return scaleX(d.age); })
			.attr("cy", function(d) { return scaleY(d.hoursperweek); })
		; 
		

		//legend
		 svg.append("circle") // <-B         
		 .attr("cx", width - 3 * _margins.right)         
		 .attr("cy",2*_margins.top)         
		 .attr("r", 10)
		.attr("class", "col1");	 
		
		svg.append("text")             
		  .attr("x", width - 3 * _margins.right + 35 )
		  .attr("y",  2*_margins.top +5)
		  .style("text-anchor", "middle")
		  .text(">50K");
		 
		
		svg.append("circle") // <-B         
		 .attr("cx",  width - 3 * _margins.right)         
		 .attr("cy",2* _margins.top+ 22)         
		 .attr("r", 10)
		.attr("class", "col0");	
		
		svg.append("text")             
		  .attr("x", width - 3 * _margins.right + 35 )
		  .attr("y",  2*_margins.top +28)
		  .style("text-anchor", "middle")
		  .text("<=50K");
	 
	 }
</script>

</body>

</html>